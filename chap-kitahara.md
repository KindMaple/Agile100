# 90％シンドロームを患っていたチームが、どうやって回復したか

## 何が起きていた？
とあるチームが１週間スプリントでスクラム開発を行なっていたのですが、
スプリント終了時点で、Doingのアイテムが複数残っていることが常態化していました。

ある日のスプリントレビューの風景

Dev「ほぼほぼ開発できているので、90％ぐらいは終わっています。」

PO「デモ見せてもらえる？」

Dev「まだデモが見せられる状態ではありません。」

PO「。。。」


スクラムなのに、バックログアイテムも分解しているのに、その中でさらに90%シンドロームが起きてしまう。
**スクラムなのに90％シンドローム!**

システムを作らされてきたプログラマの習性なのでしょうが、きちんと解決しないとなんちゃってアジャイルを邁進する事になってしまいます。

何よりもDoneにならない事を普通と思う空気感がチームに出来てしまっているので、根本的な部分から立て直しが必要そうです。

プロジェクト統括なる人にも状況を聞いてみたところ、計画通りに進まな買ったり、見通しが立てられない事にやはり不満を感じていたのですが、具体的な改善策が見つからないままずるずる開発を続けていたようです。

そしてSMからは「じゃあ残業を増やして稼働を上げましょう」なんていう意見が飛び出す始末で、早く手を打たないと本当にマズい状況です。（ハーメルンの笛吹き男か？）

きちんとアウトプットできるチームへ立て直しをしないとみんな不幸になってしまいますし、
何より失敗の原因をスクラムのせいにされてしまうのは見過ごせません。

ということで、スクラムマスター補佐（？）という役割で無理矢理チームに参画することとなりました。

以下で、私たちがどうやって安定したベロシティを出せるチームになったかをご紹介いたします。

	※アウトプットじゃなくてアウトカムだろ！みたいな意見は最もなのですが、
	　スクラムが機能していないのでまずは安定したヴェロシティでアウトプットできる事を目指しました。


## 原因を考えてみた

Doneにならない原因

1.ベロシティを生産性の目標値としていた

スプリントプランニング時には、チームのキャパシティよりも多めにスプリントバックログアイテムを積むように、PO、SMから指示されていたそうです。

当然、見積もりには下振れもあるので「全部Doneになって時間が余ったらもったいない」という思考ですね。

気持ちは分からなくもないですが、リソース効率だけにフォーカスした結果、全てのアイテムがDoneにならなくても当たり前の状況を自ずから作り出してしまっていました。


2.割り込み作業が多い

サービス開始前なので、業務が停止するような緊急事態は発生しません。

ですが、業務整理が並行で進んでいたため、調査やら他システム向けのテストデータ作成などの依頼が今日明日締め切りで頻繁に発生していました。

確かに一つ一つの作業は軽微だったのですが、当然のことながら頻繁な割り込み作業は開発効率を大きく低下させます。


3.バックログアイテムのサイズが大き過ぎる

そもそものアイテムが十分に分解出来ていなそうです。

対象のプロダクトがAPI中心だったことも影響しているのですが、フロント周りの機能がほとんど無かったために〇〇APIを作成するといったアイテムが散見されました。

画面機能であれば、「〇〇ボタンを押下したら画面が遷移する」とか単純な動作をアイテムに切り分けるのもそれほど悩むこともなさそうですが、何せAPIだと切り分け方がよく分からない。これがアイテムが分解しにくい一因になっていそうです。



## 何をやったか
その１

まずは、キャパシティを超えるような計画を止めて、全てがDoneになる量で計画することにしました。

（プロジェクト管理者に認めてもらうまでには相当の戦いがありましたが、、）

でも、まだ In Progress が残ります。

その２

次にプロジェクト管理者とかステークホルダーに根気強くスイッチングコストの説明を行い、割り込み作業は全て次のスプリント（翌週）まで待ってもらうようにしました。

（プロジェクト管理者に認めてもらうまでには相当の戦いがありましたが、、）

でも、まだIn Progressが残ります。


その３

バックログアイテムの分割方法に取り組むのですが、むしろ外的な阻害要因よりも手強い問題でした。

ここからはアイテム分解の話しを中心にしたいと思います。

REST API開発する場合、どうやって分解すれば良いのか？

従来型の開発であれば、

テーブル作成して、データオブジェクトなりアクセサーなり作って、呼び出し処理を作って、メイン作って、最後にAPI Gatewayで公開

こんな感じでしょうか。

でもこの通りに作って行くとエンドツーエンドになりません。

スプリントレビューで「テーブルが出来ました」とか「〇〇共通部品が出来ました」と言われても、プロダクトオーナーも困惑するでしょう。

プログラマーが機能を分解しようとするとコンポーネント指向になるのはある意味正しいのですが、理想を言うとアイテムの分解においてはエンドツーエンドで、その配下のタスクはコンポーネントに分解したいわけです。

言うのは簡単ですが、概念の話だけでは実際のアイテムが分解できるようになるわけではありません。

### どうやってエンドツーエンドになるように分解したのか

「フロント（に近い）側、つまりエンドポイントから開発をする」を基本方針としました。

これまでと逆側から作り始めようなんて言いだしたのだから、当然開発メンバーから反発されました。

「プログラム分かってないヤツが何か変な事言い出したぞ」と大ブーイングです。

そこで簡単な例を挙げて、「こんな感じで一回作ってみましょう。今週の開発進捗が大幅に下がったら、来週は元のやり方に戻せば良いだけなので気にしないでください。プロダクトオーナーには私が変なやり方を押し付けたせいだと言ってもらって構いません。」と言ったところ、

「そこまで言うなら一度やってみよう」開発メンバーは受け入れてくれました。
（私は内心ドキドキでしたが）


	例）
	APIの分解の例を書く



やってみると最初はアイテム分割するのに戸惑っている様子もありましたが、いざ実装の段になるとすぐに変化が見え始めました。

デイリースクラムで日々タスクが完了していくのが見えるようになると、明らかにリズムが良くなっている事が見てとれました。

開発メンバーも、すぐに終わりが見える状態で作業できるのでつまづく事が減って、開発ペースが上がったと実感できたと言っていました。

ここまで来れば、上手く機能し始めたと思えそうですが、まだ大きな問題が残っていました。

Readyになっているバックログアイテムがすぐに枯渇してしまう。

バックログリファイメントを週に1時間しかやっていなかったので、絶対的に不足していました。

POは会議に追われて、10％4時間なんてまとまった時間は取れません。





### リファイメントの時間をどう確保したか
デイリー後にやった話を書く


### まとめ
スクラムで定義されているイベントは相互に作用するから、リファイメントしっかりやらないとプランニングもレビューもできない
上手くいかない時こそちゃんとスクラムガイドに忠実であるか見直すのは大事

